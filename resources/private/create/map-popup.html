<!DOCTYPE html>
<html>
<body>

  <section class="page container" id="map-popup-content">

     <div class="map-select-info">
       <h3 data-bind="ltext: 'newRequest.chosenLocation'"></h3>
       <p data-bind="lhtml: 'create.search-check-prompt'"></p>

       <div class="use-manual-entry" data-bind="visible: useManualEntry, ltext: 'integration.getAddressNotWorking'"></div>

       <div>
         <div class="form-entry">
           <label class="form-label" data-bind="ltext: 'newRequest.propertyId'"></label>
           <input data-bind="textInput: propertyIdHumanReadable,
                             enable: useManualEntry,
                             readonly: !lupapisteApp.models.currentUser.isAuthority()"
                  data-test-id="create-property-id" type="text"
                  class="form-input text bottom-marginM">
         </div>

         <div class="form-entry">
           <label class="form-label" data-bind="ltext: 'newRequest.address'"></label>
           <input data-bind="textInput: addressString"
                  data-test-id="create-address" type="text" class="form-input text"></input>
         </div>

         <div class="form-entry">
           <label class="form-label" data-bind="ltext: 'newRequest.municipality'"></label>
           <select data-bind="visible: useManualEntry,
                              options: municipalities.municipalities,
                              optionsText: function(m) { return loc(['municipality', m.id]); },
                              optionsValue: 'id',
                              value: municipalityCode,
                              optionsCaption: loc('choose'),
                              valueAllowUnset: true"
                   data-test-id="create-municipality-select"
                   class="form-select form-input combobox"></select>
           <input data-bind="visible: !useManualEntry(), value: municipalityName"
                  disabled="disabled" type="text" class="form-input text"></input>
         </div>


         
         <!-- ko if: !municipalitySupported() -->
         <div>
            <p class="error" 
               data-bind="ltext: 'create.municipality-not-supported'">
            </p>
          </div>
         <!-- /ko -->
         <button data-bind="enable: addressOk() && propertyIdOk() && municipalitySupported(), click: goPhase2"
                 class="positive"
                 data-test-id="create-continue" id="create-location-continue">
           <span data-bind="ltext: 'continue'"></span>
           <i class="lupicon-chevron-right"></i>
         </button>
       </div>
     </div>

  </section>

</body>
</html>
