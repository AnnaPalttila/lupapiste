<!DOCTYPE html>
<html lang="en">
<body>
  <section class="page" id="inforequest">

    <div class="breadcrumb" data-bind="with: application">
        <a href="#!/inforequests" id="test-inforequests" data-bind="ltext: 'infoRequests'">Neuvontapyynnöt</a>
       / <span data-bind="text: title"></span>
    </div>

    <div class="application_summary">
      <div id="inforequest-map" class="map map-large" style="width: 280px; height: 280px;"></div>

      <div data-bind="with: application">
        <h1 data-bind="with: address">
          <span id="test-application-street" data-bind="text: street"></span>, <span data-bind="text: zip"></span> <span data-bind="text: city"></span>
        </h1>

        <div class="application_summary_info">
          <div>
            <p>Käsittelytunnus:</p>
            <span class="application_summary_text" id="test-application-id" data-bind-test-id="application-id" data-bind="text: id()"></span>
          </div>
          <div data-bind="if: state">
            <p>Tila:</p>
            <span id="test-inforequest-state" class="application_summary_text" data-bind="text: loc('inforequest_' + state())"></span>
          </div>
          <div data-bind="with: $root.applicationModel.data">
            <p>Luotu:</p>
            <span data-bind="if: $data.created"><span class="application_summary_text" id="test-application-submitted" data-bind="dateString: created"></span></span>
          </div>
        </div>
        <div class="inforequest_actions">
          <button id="test-mark-inforequest-answered" data-bind="enable: $root.authorization.ok('mark-inforequest-answered'), click: markInforequestAnswered" type="submit" class="btn btn-primary">Merkitse vastatuksi</button>
        </div>
      </div>
    </div>
    <div class="sidebar">
      <aside class="instructions">
          <h3>Ohje</h3>
          <p>Tässä näkymässä voit käsitellä neuvontapyynnön tietoja.</p>
      </aside>
    </div>
    <div class="container" data-bind="with: $root.comment">
        <p class="tab-info"> Kysymys ja keskustelu.</p>
        <div class="tab-wrapper">
          <table class="table table-striped conversation">
            <tbody data-bind="foreach: comments">
              <tr class="comment inforequest-comment">
                <td class="comment-party commenttd"><span class="date" data-bind="dateTimeString: created"></span><br /> <span class="author" data-bind="text: user.firstName()+' '+user.lastName()"></span><br /> <!-- span class="author" data-bind="fullName: user"></span><br/  TODO: Does not woek --> <b>(<span class="role" data-bind="ltext: user.role"></span>)</b></td>
                <td class="commenttd" data-bind="text: text"></td>
              </tr>
            </tbody>
          </table>
          <form>
            <h3>Kirjoita viesti:</h3>
            <textarea class="form-input textarea" id="commentText" data-bind="value: text, valueUpdate: 'afterkeydown'" rows="3" placeholder="Kirjoita viesti"></textarea>
            <button id="application.addComment" data-bind="disable: disabled, click: submit" type="submit" class="btn btn-primary">L&auml;het&auml; viesti</button>
          </form>
        </div>
      </div>
  </section>
</body>
</html>
