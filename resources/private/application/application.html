<!DOCTYPE html>
<html lang="en">
<body>
	<section class="page" id="application">
		<div class="container">
			<div class="row">
				<ul class="breadcrumb">
					<li><a href="#!/applications"  id="test-applications">Lupahakemukset</a></li>
					<li><span class="divider">/</span></li>
					<li class="active"><span data-bind="text: application.title"></span></li>
				</ul>
			</div>

			<div class="row">
				<div class="span3">
					<div id="application-map" class="todo map" style="width: 100%; height: 220px;"></div>
				</div>
				<div class="span7">
					<h1>
						<span id="test-application-street-address" data-bind="text: application.streetAddress"></span>, <span data-bind="text: application.postalCode"></span> <span data-bind="text: application.postalPlace"></span>
					</h1>
					<h2 data-bind="text: application.title"></h2>
					<b>Lupatunnus:</b>							   <span data-bind-test-id="application-id" data-bind="text: application.id"></span><br/>
					<b>Tila:</b>									 <span data-bind="ltext: application.state"></span><br/>
					<b>Lupatyyppi:</b>							   <span data-bind="ltext: application.permitType"></span><br/>
					<b class="todo">Arvioitu käsittelyaika:</b>	  <br/>
					<b class="todo">Lupapäätöksen toimittaminen:</b> <br/>
					<b>Hakemus luotu:</b>				 <span data-bind="dateString: application.created"></span> <br/>
				</div>
				<div class="span2">
				</div>
			</div>
			
			<div class="row">
				<div class="span10">
					<div class="accordion-group">
						<div class="accordion-heading active">
							<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-1" href="#collapseOne">Hakemuksen perustiedot</a>
						</div>
						
						<div id="collapseOne" class="accordion-body in collapse" style="height: auto; ">
							<div class="accordion-inner">
	
						<h1>
						</h1>
						<h2>Hakemuksen perustiedot</h2>
						<h3>Hakijat</h3>
						
						<ul data-bind="foreach: application.documents">
							<!-- ko if: documentType == 'hakijaTieto' -->
							<li> 
								<b>Nimi:</b>			 <span name="test-applicant-name" data-bind="text: content.nimi">Mikko Intonen</span><br/>
								<b>Katuosoite:</b>	     <span name="test-applicant-street-address" data-bind="text: content.katuosoite">Vanhakatu 5</span><br/>
								<b>Postinumero:</b>	     <span name="test-applicant-postal-code" data-bind="text: content.postinumero">55550</span><br/>
								<b>Postitoimipaikka:</b> <span name="test-applicant-postal-place" data-bind="text: content.postitoimipaikka">Viiselä</span><br/>
								<b>Puh:</b>			     <span data-bind="text: content.puhelinnumero">+35842323</span><br/>
								<b>Sähköpostiosoite:</b> <span name="test-applicant-email" data-bind="text: content.sahkopostiosoite">mikko.intonen@example.com</span><br/>
							</li>
							<!-- /ko -->
						</ul>
						
						<h3>Pääsuunnittelija</h3>
						<ul data-bind="foreach: application.documents">
							<!-- ko if: documentType == 'paasuunnittelijaTieto' -->
							<li> 
								<b>Nimi:</b>			 <span data-bind="text: content.nimi">Mirja Nieminen</span><br/>
								<b>Koulutus:</b>		 <span data-bind="text: content.koulutus">Arkkitehtu</span><br/>
								<b>Kokemus:</b>		  <span data-bind="text: content.kokemus">10 v</span><br/>
								<b>Katuosoite:</b>	   <span data-bind="text: content.katuosoite">Niemikatu 4</span><br/>
								<b>Postinumero:</b>	  <span data-bind="text: content.katuosoite">44440</span><br/>
								<b>Postitoimipaikka:</b> <span data-bind="text: content.katuosoite">Niemelä</span><br/>
								<b>Puh:</b>			  <span data-bind="text: content.puhelinnumero">0311223344</span><br/>
								<b>Sähköpostiosoite:</b><span data-bind="text: content.sahkopostiosoite">mirja.nieminen@example.com</span><br/>
							</li>
							<!-- /ko -->
						</ul>
						
					 </div>
				 </div>
			  </div>
			  
			  </div>
				<div class="span2">
						<button id="test-submit-application" data-bind="disable: !$data.authorization || authorization.data()['submit-application'] && !authorization.data()['submit-application'].ok, click: application.submitApplication" type="submit" class="btn btn-success mr10">
							Jätä hakemus käsiteltäväksi
						</button>
						<br/><br/>
						<button id="test-approve-application" data-bind="disable: !$data.authorization || authorization.data()['approve-application'] && !authorization.data()['approve-application'].ok, click: application.approveApplication" type="submit" class="btn btn-success mr10">
							Siirrä kuntarekisteriin
						</button>
						<br/><br/>
						<br/><br/>
					<button class="todo btn btn-success mr10">
						Kysy neuvoa
					</button>
						<br/><br/>
					<button class="todo btn btn-success mr10">
						Lisää toimenpide
					</button>
						<br/><br/>
					<button class="todo btn btn-danger mr10">
						Poista hakemus
					</button>
						<br/><br/>
				</div>
			</div>
			
			<div class="row">
				<div class="span10">
					<div class="accordion-group" data-bind="foreach: application.documents">
					<!-- ko if: documentType == 'rh1' -->
						<div class="accordion-heading active"> 
						<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-2" href="#collapseTwo" 
						data-bind="text: documentType + ' liittyen toimenpiteeseen ' + parentDocument">Dokumentti </a> </div>
						  <div id="collapseThree" class="accordion-body in collapse" style="height: auto; ">
							<div class="accordion-inner">
							<b>Rakennusaine:</b> <span data-bind="text: content.rakennusaine"></span> <br/>
							<b>Kerrosluku:</b>   <span data-bind="text: content.kerrosluku"></span> <br/>
							<b>Kerrosala:</b>	<span data-bind="text: content.kerrosala"></span> <br/>
							</div>
						  </div>
					<!-- /ko -->
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="span10">
					<div class="accordion-group">
					  <div class="accordion-heading active">
 						  <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-2" href="#collapseThree">Liitteet</a> </div>
						  <div id="collapseThree" class="accordion-body in collapse" style="height: auto; ">
							<div class="accordion-inner">
								<table data-bind="visible: $data.application.attachments && application.attachments().length > 0, foreach: application.attachments" class="table table-striped">
									<tr style="cursor: pointer;">
										<td data-bind="attr: {onclick: open}">
											<span data-bind="visible: name != null && name.length > 0">
												<span data-bind="text: name"></span>
											</span>
											<span data-bind="visible: name == null || name.length == 0">
												<i>Nimetön</i>
											</span>
										</td>
										<td>
											<span data-bind="ltext: contentType"></span> <a href="" data-bind="text: filename, attr: {href: '/rest/download/' + id}" target="_blank"></a> <i data-bind="size: size"></i>
										</td>
									</tr>
								</table>
								<div data-bind="visible: $data.application.attachments && application.attachments().length == 0">
									<i>Ei liitteitä</i>
								</div>
								<button class="btn btn-success" data-bind="click: attachment.newAttachment">Lisää liite</button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row" data-bind="with: application.verdict">
				<div class="span10">
					<div class="accordion-group">
					  <div class="accordion-heading active"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-2" href="#collapseThree">Päätös</a> </div>
						  <div id="collapseThree" class="accordion-body in collapse" style="height: auto; ">
							<div class="accordion-inner">
								<span id="test-application-verdict" data-bind="text: text"></span>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row" data-bind="with: rh1">
				<div class="span10">
					<div class="accordion-group">
						<div class="accordion-heading active">
							<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-2" href="#collapseRH1">RH1</a>
						</div>
						<div id="collapseRH1_1" class="accordion-body in collapse" style="height: auto;">
							<div class="accordion-inner">
								<h1>Rakennuspaikan tiedot</h1>
								<form data-bind="with: rakennuspaikanTiedot">
			            <label class="form_label" for="building_location">Rakennuksen sijaintikunta:</label>
			            <input class="form_input" type="text" data-bind="value: building_location" /><br/>
			            <label class="form_label" for="borough">Kylä/kaupunginosa: </label>
			            <input class="form_input" type="text" data-bind="value: borough" /><br />
			            <label class="form_label" for="stead_number"> Tilan RN:</label>
			            <input class="form_input" type="text" data-bind="value: stead_number" /><br />
			            <label class="form_label" for="stead_name"> Tilan nimi:</label>
			            <input class="form_input" type="text" data-bind="value: stead_name" /><br />
			            <label class="form_label" for="lot"> Kortteli ja tontti:</label>
			            <input class="form_input" type="text" data-bind="value: lot" /><br />
			            <label class="form_label" for="building_address"> Rakennuksen lähiosoite:</label>
			            <input class="form_input" type="text" data-bind="value: building_address" /><br />
			            <label class="form_label" for="building_address_second"> Rakennuksen toinen lähiosoite:</label>
			            <input class="form_input" type="text" data-bind="value: building_address_second" /><br />
			            <label class="form_label" for="postal_code"> Postinumero:</label>
			            <input class="form_input" type="text" data-bind="value: postal_code" /><br />
			            <label class="form_label" for="post_office"> Postitoimipaikka:</label>
			            <input class="form_input" type="text" data-bind="value: post_office" /><br />
			            <label class="form_label" for="tenure"> Rakennuspaikan/tontin hallintaperuste:</label>
			            <input class="form_radio" type="radio" data-bind="checked: tenure" value="owned"> Oma
			            <input class="form_radio" type="radio" data-bind="checked: tenure" value="rented"> Vuokrattu <br/>
			            <label class="form_label" for="owner"> Rakennuksen omistajan(jien) henklötunnut / Y-tunnus</label>
			            <input class="form_input" type="text" data-bind="value: owner" /><br />
			            <label class="form_label" for="plan_readiness">Kaavallinen valmiusaste: </label>
			            <select class="form_input combobox" data-bind="value: plan_readiness">
			                 <option value="building_plan">Rakennuskaava</option>
			                 <option value="shore_plan">Rantakaava</option>
			                 <option value="master_plan">Yleiskaava</option>
			                 <option value="no_plan">Ei kaavaa</option>
			            </select><br />
			            <label class="form_label" for="exemption">Poikkeamislupa: </label>
			            <select class="form_input combobox" data-bind="value: exemption">
			                 <option value="no_selection">Ei poikkeuslupaa</option>
			                 <option value="building_ban">Rakennuskielto</option>
			                 <option value="other">Muu syy</option>
			            </select>
								</form>
								<h1>Rakennuksen tiedot</h1>
								<form data-bind="with: rakennuksenTiedot">
                     <label class="form_label" for="ownership">Omistajalaji: </label>
                     <select class="form_input combobox" data-bind="value: ownership">
                         <option value="val1">Yksityinen maatalousyrittäjä</option>
                         <option value="val2">Muu yksityinen henkilö tai perikunta</option>
                         <option value="val3">Asunto-osakeyhtiö tai -osuuskunta</option>
                         <option value="val4">Kiinteistöosakeyhtiö</option>
                         <option value="val5">Yksityinen yritys</option>
                         <option value="val6">Valtio- tai kuntaenemmistöinen yritys</option>
                         <option value="val7">Kunnan liikelaitos</option>
                         <option value="val8">Valtion liikelaitos</option>
                         <option value="val9">Pankki tai vakuutuslaitos</option>
                         <option value="val10">kunta tai kuntaliitto</option>
                     </select><br/>
                     <input class="form_input_other" type="text" data-bind="value: ownership_other" /><br/>
                     <label class="form_label" for="builder">Rakennuksen pääasiallinen rakentaja: </label>
                     <select class="form_input combobox" data-bind="value: builder" >
                         <option value="val1">Liiketaloudellinen rakentaminen</option>
                         <option value="val2">Muu rakentaminen</option>
                      </select><br/>
                     <label class="form_label" for="builder">Rakennustoimenpide: </label>
                     <select class="form_input combobox" data-bind="value: operation">
                         <option value="val1">Perustusten ja kantavien rakenteiden muutos- ja korjaustyö</option>
                         <option value="val2">Rakennuksen pääasiallinen käyttötarkoitusmuutos</option>
                         <option value="val3">Muut muutostyös</option>
                         <option value="val4">Perusparannusluonteinen muutostyö</option>
                     </select><br/>
                     <label class="form_label" for="main_use">Rakennuksen pääasiallinen käyttötarkoitus: </label>
                     <input class="form_input" type="text" data-bind="value: main_use" /><br />
                     <label class="form_label" for="building_volume">Rakennuksen tilavuus: </label>
                     <input class="form_input" type="text" data-bind="value: building_volume" /><br />
                     <label class="form_label" for="building_gross_floor_area">Rakennuksen kerrosala: </label>
                     <input class="form_input" type="text" data-bind="value: building_gross_floor_area" /><br />
                     <label class="form_label" for="building_total_area">Rakennuksen kokonaisala: </label>
                     <input class="form_input" type="text" data-bind="value: building_total_area" /><br />
                     <label class="form_label" for="floor_count">Kerrosluku: </label>
                     <input class="form_input" type="text" data-bind="value: floor_count" /><br />
                     <label class="form_label" for="cellar_floor_area">Kellarin pintala: </label>
                     <input class="form_input" type="text" data-bind="value: cellar_floor_area" /><br />
                     <label class="form_label" for="supporting_structure_material">Kantavien rakenteiden pääasiallinen rakennusaine: </label>
                     <select class="form_input combobox" data-bind="value: supporting_structure_material">
                         <option value="val1">Betoni</option>
                         <option value="val2">Tiili</option>
                         <option value="val3">Teräs</option>
                         <option value="val4">Puu</option>
                         <option value="val5">Muu</option>
                     </select>
                     <input class="form_input_other" type="text" data-bind="value: supporting_structure_material_other" /><br/>
                     <label class="form_label" for="build_style">Rakennuksen pääasiallinen rakennustapa: </label>
                     <select class="form_input combobox" data-bind="value: build_style">
                         <option value="val1">Elementtirakenteinen</option>
                         <option value="val2">Paikalla tehty</option>
                     </select><br/>
                     <label class="form_label" for="facade_material">Pääasiallinen julkisivumateriaali: </label>
                     <select class="form_input combobox" data-bind="value: facade_material">
                         <option value="val1">Betoni</option>
                         <option value="val2">Tiili</option>
                         <option value="val3">Teräs</option>
                         <option value="val4">Puu</option>
                         <option value="val5">Lasi</option>
                         <option value="val6">Muu</option>
                     </select>
                     <input class="form_input_other" type="text" data-bind="value: facade_material_other" /><br/>
                     <label class="form_label" for="network_interfaces">Liittymät verkostoihin: </label>
										 <div data-bind="with: network_interfaces">
	                     <input class="form_input" type="checkbox" data-bind="checked: sewer"> Viemäri
	                     <input class="form_input" type="checkbox" data-bind="checked: water"> Vesijohto
	                     <input class="form_input" type="checkbox" data-bind="checked: electricity"> Sähkö
	                     <input class="form_input" type="checkbox" data-bind="checked: gas"> Maakaasu
	                     <input class="form_input" type="checkbox" data-bind="checked: cabel"> Kaapeli
	                   </div>
                     <label class="form_label" for="heating">Pääasiallinen lämmitystapa: </label>
                     <select class="form_input combobox" data-bind="value: heating">
                         <option value="val1">Vesikeskuslämmitys</option>
                         <option value="val2">Ilmakeskuslämmitys</option>
                         <option value="val3">Suora sähkölämmitys</option>
                         <option value="val4">uunilämmitys</option>
                         <option value="val5">Ei kiinteää lämmityslaitetta</option>
                     </select><br/>
                     <label class="form_label" for="heating_source">Polttoaine/lämmönlähde: </label>
                     <select class="form_input combobox" data-bind="value: heating_source">
                         <option value="val1">Kauko- tai aluelämpö</option>
                         <option value="val2">Kevyt polttoöljy</option>
                         <option value="val3">Raksas polttoöljy</option>
                         <option value="val4">Sähkö</option>
                         <option value="val5">Kaasu</option>
                         <option value="val6">Kivihiili, koksi tms.</option>
                         <option value="val7">Puu</option>
                         <option value="val8">Turve</option>
                         <option value="val9">Maalämpö tms</option>
                         <option value="val10">Muu</option>
                     </select>
                     <input class="form_input_other" type="text" data-bind="value: heating_source_other" /><br/>
										 <div data-bind="with: building_equipments">
	                     <label class="form_label" for="building_equipments">Rakennuksen varusteet: </label>
	                     <input class="form_input" type="checkbox" data-bind="checked: electricity"> Sähkö
	                     <input class="form_input" type="checkbox" data-bind="checked: gas" value="gas"> Kaasu
	                     <input class="form_input" type="checkbox" data-bind="checked: sewer"> Viemäri
	                     <input class="form_input" type="checkbox" data-bind="checked: water"> Vesijohto
	                     <input class="form_input" type="checkbox" data-bind="checked: warm_water""> Lämmin vesi
	                     <input class="form_input" type="checkbox" data-bind="checked: solar_panel"> Aurinkopaneeli
	                     <input class="form_input" type="checkbox" data-bind="checked: elevator"> Hissi
	                     <input class="form_input" type="checkbox" data-bind="checked: air_conditioning"> Koneellinen ilmastointi
	                     <input class="form_input" type="checkbox" data-bind="checked: saunas"> Talokohtaisia saunoja
	                     <input class="form_input" type="checkbox" data-bind="checked: swimming_pools"> Uima-altaita
	                     <input class="form_input" type="checkbox" data-bind="checked: shelter"> Väestönsuoja <br/>
	                   </div>
                     <table class="form_table" data-bind="with: aaa">
                         <tr>
                             <th>Tila</th>
                             <th> Huoneistoala neliömetreinä</th>
                         </tr>
                         <tr>
                             <td><p>Asuntotilaa (ei vapaa-ajan asunnosta)</p></td>
                             <td><input type="text" data-bind="value: a1"></td>
                         </tr>
                         <tr>
                             <td><p>Myymälä- majoitus- ja ravitsemistilaa</p></td>
                             <td><input type="text" data-bind="value: a2"></td>     
                         </tr>
                         <tr>
                             <td><p>Hoitotilaa</p></td>
                             <td><input type="text" data-bind="value: a3"></td>     
                         </tr>
                         <tr>
                             <td><p>Toimisto- ja hallintotilaa</p></td>
                             <td><input type="text" data-bind="value: a4"></td>     
                         </tr>
                         <tr>
                             <td><p>Kokoontumistilaa</p></td>
                             <td><input type="text" data-bind="value: a5"></td>     
                         </tr>
                         <tr>
                             <td><p>Opetustilaa</p></td>
                             <td><input type="text" data-bind="value: a6"></td>     
                         </tr>
                         <tr>
                             <td><p>Tuotantotilaa (teollisuus)</p></td>
                             <td><input type="text" data-bind="value: a7"></td>     
                         </tr>
                         <tr>
                             <td><p>Varastotilaa</p></td>
                             <td><input type="text" data-bind="value: a8"></td>     
                         </tr>
                         <tr>
                             <td><p>Muuta huoneistoalaan kuuluvaa tilaa</p></td>
                             <td><input type="text" data-bind="value: a9"></td>     
                         </tr>
                         <tr>
                             <td><p>Huoneistoala yhteensä</p></td>
                             <td><input type="text" data-bind="value: a10"></td>     
                         </tr>
                     </table>
                 </form>
                 
                <h1>Huoneiston tiedot</h1>
								<form data-bind="with: huoneistonTiedot">
                    <input type="radio" data-bind="checked: apartments" value="no_new_apartments"> Ei asuntoja rakennuksessa tai asuntoihin ei tehdä muutoksia <br/>
                    <input type="radio" data-bind="checked: apartments" value="one_new_apartment"> Yksi asunto uudessa rakennuksessa tai yksi uusi huoneisto <br/>
                    <input type="radio" data-bind="checked: apartments" value="new_apartments"> Useampia asuntoja uudessa rakennuksessa tai asuntoon tehdään muutoksia <br/>

                    <input class="form_input" type="text" data-bind="value: apartment_id" /><br />
                    <label class="form_label" for="apartment_id">Huoneiston tunniste (jos on käytössä): </label>
                    <label class="form_label" for="room_count">Huoneluku ilman keittiötä (kpl): </label>
                    <input class="form_input" type="text" data-bind="value: room_count" /><br />
                    <label class="form_label" for="kitchen_type">Keittiötyyppi: </label>
                    <select class="form_input combobox" data-bind="value: kitchen_type">
                        <option value="val1">Keittiö</option>
                        <option value="val2">Keittokomero</option>
                        <option value="val3">Keittotila</option>
                        <option value="val3">Tupakeittiö</option>
                    </select> <br/>
                    <label class="form_label" for="apartment_floor_area">Huoneistoala: </label>
                    <input class="form_input" type="text" data-bind="value: apartment_floor_area" /><br />
                    <label class="form_label" for="apartment_equipments">Huoneiston varusteet: </label>
		 							 	<div data-bind="with: apartment_equipments">
	                    <input class="form_input" type="checkbox" data-bind="checked: toilet"> WC
	                    <input class="form_input" type="checkbox" data-bind="checked: shower"> Amme / Suihku
	                    <input class="form_input" type="checkbox" data-bind="checked: sauna"> Sauna
	                    <input class="form_input" type="checkbox" data-bind="checked: balcony"> Parveke / terassi
	                    <input class="form_input" type="checkbox" data-bind="checked: warm_water"> Lämmin vesi <br/>
	                  </div>
                    <label class="form_label" for="new_apartments">Uusia asuntoja yhteensä </label>
                    <input class="form_input" type="text" data-bind="value: new_apartments" /><br />
                    <label class="form_label" for="apartments_total_floor_area">Asuntojen pinta-ala yhteensä </label>
                    <input class="form_input" type="text" name="apartments_total_floor_area" /><br />
                </form> 
                 
								<button data-bind="click: save" type="submit" class="btn btn-success">Tallenna</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			

			<div class="row">
				<div class="span10">
					<div class="accordion-group">
						  <div class="accordion-heading active"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-3" href="#collapseFour">Keskusteluketju</a> </div>
						  <div id="collapseFour" class="accordion-body in collapse" style="height: auto; ">
							<div class="accordion-inner">
		
							<table class="table table-striped">
								<tbody data-bind="foreach: application.comments">
									<tr class="comment">
										<td class="commentParty">
											<span class="date" data-bind="dateTimeString: created"></span> <br />
											<span class="author" data-bind="fullName: user"></span>
											<br />
											<b>(<span class="role" data-bind="ltext: user.role"></span>)</b>
										</td>
										<td data-bind="text: text"></td>
									</tr>
								</tbody>
							</table>
							<form class="well">
								<div class="row">
									<div class="span12">Keskustele hakemuksesta:</div>
								</div>
								<div class="row">&nbsp;</div>
								<textarea class="input-xlarge span5" id="commentText" data-bind="value: comment.text, valueUpdate: 'afterkeydown'" rows="3" placeholder="Kirjoita viesti"></textarea>
								<div class="btn-toolbar">
									<button id="application.addComment" data-bind="disable: comment.disabled, click: comment.submit" type="submit" class="add-comment btn btn-success mr10">Lähetä viesti</button>
								</div>
							</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>
</html>
