<!DOCTYPE html>
<html lang="en">
<body>
	<section class="page" id="application" data-bind="with: application">
			<div class="breadcrumb">
				<a href="#!/applications" id="test-applications">Omat hakemukset</a> / <span data-bind="text: title"></span>
			</div>
			<div class="application_summary">
				<div id="application-map" class="todo map" style="width: 280px; height: 220px;"></div>
				<h1 data-bind="with: address">
					<span id="test-application-street" data-bind="text: street"></span>, 
					<span data-bind="text: zip"></span> <span data-bind="text: city"></span>
				</h1>
        
				<div class="application_summary_info">
					<div>
						<p>Lupatunnus:</p>
						<span class="application_summary_text" data-bind-test-id="application-id" data-bind="text: id()"></span>
					</div>
					<div>
						<p>Tila:</p>
						<span id="test-application-state" class="application_summary_text" data-bind="ltext: state()"></span>
					</div>
					<div>
						<p>Lupatyyppi:</p>
						<span class="application_summary_text" data-bind="ltext: permitType()"></span>
					</div>
					<div>
						<p>Toimenpiteet:</p>
						<ul data-bind="with: documents">
							<li><span data-bind="text: toimenpiteet()[0].otsikko" style="display: none;"></span>
							<ul data-bind="foreach: toimenpiteet">
								<li data-bind="text: otsikko" id="test-application-operation"></li>
							</ul>
						</ul>
					</div>
					<div>
						<p>Hakemus luotu:</p>
						<span class="application_summary_text" data-bind="dateString: created"></span>
					</div>
				</div>
				<div class="application_actions">
					<button id="test-submit-application" data-bind="disable: !$root.authorization || $root.authorization.data()['submit-application'] && !$root.authorization.data()['submit-application'].ok, click: submitApplication" type="submit" class="btn btn-primary">Jätä hakemus käsiteltäväksi</button>
					<button id="test-approve-application" data-bind="disable: !$root.authorization || $root.authorization.data()['approve-application'] && !$root.authorization.data()['approve-application'].ok, click: approveApplication" type="submit" class="btn btn-primary">Siirrä kuntarekisteriin</button>
					<button class="todo btn btn-large action-bar-button" data-bind="enable:false">Kysy neuvoa</button>
					<button class="todo btn btn-large action-bar-button" data-bind="enable:false">Lisää toimenpide</button>
					<button class="todo btn btn-large action-bar-button" data-bind="enable:false">Poista hakemus</button>
				</div>
			</div>
			<div class="sidebar">
				<button class="todo btn btn-large btn-success action-bar-button" style="display: none">Tallenna</button>
				<aside class="instructions">
					<h3>Ohje</h3>
					<p>Tässä näkymässä voit käsitellä hakemuksen tietoja. Voit kysyä tarvittaessa neuvoa rakennusvalvonnasta keskusteluketjussa. Voit jättää valmiin hakemuksen käsittelyyn painamalla "Jätä hakemus" nappia. Tällöin rakennusvirannomainen tarkistaa hakemuksesi ja ottaa sen käsittelyyn. Tehtyään päätöksen rakennusviranomainen siirtää hakemuksen tilaan hyväksytty tai evätty. Varsinaisen päätöspöytäkirjan löydät "Päätös"-välilehdeltä</p>
				</aside>
			</div>
			<div id="tabs_container">
				<ul id="tabs">
					<li class="active"><a data-bind="click: $root.tab.tabClick, clickBubble: false" href="#application_tab">Hakemuksen tiedot</a></li>
					<li><a id="test-attachments-tab" data-bind="click: $root.tab.tabClick, clickBubble: false" href="#attachments_tab">Liitteet</a></li>
					<li><a data-bind="click: $root.tab.tabClick, clickBubble: false" href="#hearings_tab">Naapurien kuuleminen</a></li>
					<li><a data-bind="click: $root.tab.tabClick, clickBubble: false" href="#pleadings_tab">Lausunnot</a></li>
					<li><a id="test-conversation-tab" data-bind="click: $root.tab.tabClick, clickBubble: false" href="#conversation_tab">Keskusteluketju</a></li>
					<li><a id="test-verdict-tab" data-bind="click: $root.tab.tabClick, clickBubble: false" href="#decision_tab">Päätös</a></li>
				</ul>
			</div>
			<div id="tab_content_container" class="container">
				<div class="tab_content" id="application_tab" style="display: block;">
					<div class="application_section">
						<h2 class="application_section_header" data-bind="click: $root.accordian.accordianClick, clickBubble: false">Hakemuksen perustiedot</h2>
						<div class="application_section_content content_expanded">
							<h3>Hakija</h3>
							<ul data-bind="with: documents">
								<li><b>Nimi:</b> <span name="test-applicant-name" data-bind="text: hakija.nimi"></span><br/>
								    <b>Katuosoite:</b> <span name="test-applicant-street" data-bind="text: hakija.address.street"></span><br/>
								    <b>Postinumero:</b> <span name="test-applicant-zip" data-bind="text: hakija.address.zip"></span><br/>
								    <b>Postitoimipaikka:</b> <span name="test-applicant-city" data-bind="text: hakija.address.city"></span><br/>
								    <b>Puh:</b> <span data-bind="text: hakija.puhelinnumero"></span><br/>
								    <b>Sähköpostiosoite:</b> <span name="test-applicant-email" data-bind="text: hakija.sahkopostiosoite"></span><br/>
							   </li>
							</ul>
              <br/>
                <div>
                  <h3>Valtuutetut</h3>
                  <div data-bind="with: $root.applicationModel.data">
                    <h4>Lukuoikeudet</h4>
                    <ul data-bind="foreach: _.filter(auth(),function(role) {return role.role() == 'reader'})">
                      <li>
                        <span data-bind="text: username"></span> 
                        (<span data-bind="text: firstName"></span> <span data-bind="text: lastName"></span>)
                        <a name="remove-read" href="#" data-bind="click: $root.application.removeAuth">Poista</a>
                      </li>
                    </ul>
                    <h4>Kirjoitusoikeudet</h4>
                    <ul data-bind="foreach: _.filter(auth(),function(role) {return role.role() == 'writer'})">
                      <li>
                        <span data-bind="text: username"></span> 
                        (<span data-bind="text: firstName"></span> <span data-bind="text: lastName"></span>)
                        <a name="remove-write" href="#" data-bind="click: $root.application.removeAuth">Poista</a>
                      </li>
                    </ul>
                    <!--  /ko -->
                    <br/>
                  </div>
                </div>
                <h3>Kutsutut</h3>
                
                <ul data-bind="foreach: invites">
                  <li class="user-invite" name="user-invite">
                    <span data-bind="text: user.username"></span>
                    (<span data-bind="text: user.firstName"></span> <span data-bind="text: user.lastName"></span>)
                    - <span data-bind="text: text"></span>
                    <a name="remove-invite" href="#" data-bind="click: $root.application.removeInvite">Poista</a>
                  </li>
                </ul>

                <div data-bind="with: $root.invite">
                  <table>
                    <tr><td>sähköpostiosoite</td><td><input id="invite-email" class="form_input" type="text" data-bind="value: email" /></td></tr>
                    <tr><td>teksti          </td><td><textarea id="invite-text" rows=5 class="form_input" data-bind="value: text"></textarea></td></tr>
                    <tr><td>&nbsp;          </td><td><a href="#" id="test-ask-for-planner" data-bind="disable: !$root.authorization || $root.authorization.data()['ask-for-planner'] && !$root.authorization.data()['ask-for-planner'].ok, click: submit">kutsu uusi suunnittelija</a></td></tr>
                  </table>
                </div>
              </div>
						</div>
					<div class="application_section">
						<h2 class="application_section_header" data-bind="click: $root.accordian.accordianClick, clickBubble: false">Rakennuspaikan tiedot</h2>
						<div class="application_section_content content_expanded">
							<div class="content-actions" data-bind="visible: $root.authorization && $root.authorization.data()['approve-content'] && $root.authorization.data()['approve-content'].ok">
								<button class="todo btn btn-small content-accept">Hyväksy</button>
								<button class="todo btn btn-small content-reject">Hylkää</button>
							</div>
							<div data-bind="with: $root.rh1">
								<form data-bind="with: rakennuspaikanTiedot">
									<label class="form-label" for="building_location">Rakennuksen sijaintikunta:</label>
                                    <span class="form-error">Tallennus ei onnistunut</span>
                                    <input class="form-input long" type="text" data-bind="value: building_location" />
                                    <label class="form-label" for="borough">Kylä/kaupunginosa: </label>
                                    <input class="form-input long" type="text" data-bind="value: borough" />
                                    <label class="form-label" for="stead_number"> Tilan RN:</label>
                                    <input class="form-input" type="text" data-bind="value: stead_number" />
                                    <label class="form-label" for="stead_name"> Tilan nimi:</label>
                                    <input class="form-input long" type="text" data-bind="value: stead_name" />
                                    <label class="form-label" for="lot"> Kortteli ja tontti:</label>
                                    <input class="form-input" type="text" data-bind="value: lot" />
                                    <label class="form-label" for="building_address"> Rakennuksen lähiosoite:</label>
                                    <input class="form-input" type="text" data-bind="value: building_address" />
                                    <label class="form-label" for="building_address_second"> Rakennuksen toinen lähiosoite:</label>
                                    <input class="form-input" type="text" data-bind="value: building_address_second" />
                                    <label class="form-label" for="postal_code"> Postinumero:</label> 
                                    <input class="form-input" type="text" data-bind="value: postal_code" />
                                    <label class="form-label" for="post_office"> Postitoimipaikka:</label> 
                                    <input class="form-input" type="text" data-bind="value: post_office" /> 
                                    <label class="form-label" for="tenure"> Rakennuspaikan/tontin hallintaperuste:</label> 
                                    <input class="form-input radio" type="radio" data-bind="checked: tenure" value="owned"> Oma 
                                    <input class="form-input radio" type="radio" data-bind="checked: tenure" value="rented"> Vuokrattu 
                                    <label class="form-label" for="owner"> Rakennuksen omistajan(jien) henklötunnut / Y-tunnus</label> 
                                    <input class="form-input" type="text" data-bind="value: owner" />
                                    <label class="form-label" for="plan_readiness">Kaavallinen valmiusaste: </label> 
                                    <select class="form-input combobox"
										data-bind="value: plan_readiness">
										<option value="building_plan">Rakennuskaava</option>
										<option value="shore_plan">Rantakaava</option>
										<option value="master_plan">Yleiskaava</option>
										<option value="no_plan">Ei kaavaa</option>
									</select>
                                    <label class="form-label" for="exemption">Poikkeamislupa: </label>
                                    <select class="form-input combobox" data-bind="value: exemption">
										<option value="no_selection">Ei poikkeuslupaa</option>
										<option value="building_ban">Rakennuskielto</option>
										<option value="other">Muu syy</option>
									</select>
								</form>
							</div>
							<div class="content-actions" data-bind="visible: $root.authorization && $root.authorization.data()['approve-content'] && $root.authorization.data()['approve-content'].ok">
								<button class="todo btn btn-small content-accept">Hyväksy</button>
								<button class="todo btn btn-small content-reject">Hylkää</button>
							</div>
						</div>
					</div>
					<div class="application_section">
						<h2 class="application_section_header" data-bind="click: $root.accordian.accordianClick, clickBubble: false">Rakennuksen tiedot</h2>
						<div class="application_section_content content_expanded">
							<div class="content-actions" data-bind="visible: $root.authorization && $root.authorization.data()['approve-content'] && $root.authorization.data()['approve-content'].ok">
								<button class="todo btn btn-small content-accept">Hyväksy</button>
								<button class="todo btn btn-small content-reject">Hylkää</button>
							</div>
							<div data-bind="with: $root.rh1">
								<form data-bind="with: rakennuksenTiedot">
									<label class="form-label" for="ownership">Omistajalaji: </label>
                                    <select class="form-input combobox" data-bind="value: ownership">
										<option value="val1">Yksityinen maatalousyrittäjä</option>
										<option value="val2">Muu yksityinen henkilö tai perikunta</option>
										<option value="val3">Asunto-osakeyhtiö tai -osuuskunta</option>
										<option value="val4">Kiinteistöosakeyhtiö</option>
										<option value="val5">Yksityinen yritys</option>
										<option value="val6">Valtio- tai kuntaenemmistöinen yritys</option>
										<option value="val7">Kunnan liikelaitos</option>
										<option value="val8">Valtion liikelaitos</option>
										<option value="val9">Pankki tai vakuutuslaitos</option>
										<option value="val10">kunta tai kuntaliitto</option>
									</select>
                                    <input class="form-input other" type="text" data-bind="value: ownership_other" />
                                    <label class="form-label" for="builder">Rakennuksen pääasiallinen rakentaja: </label>
                                    <select class="form-input combobox" data-bind="value: builder">
										<option value="val1">Liiketaloudellinen rakentaminen</option>
										<option value="val2">Muu rakentaminen</option>
									</select>
                                    <label class="form-label" for="builder">Rakennustoimenpide: </label>
                                    <select class="form-input combobox" data-bind="value: operation">
										<option value="val1">Perustusten ja kantavien rakenteiden muutos- ja korjaustyö</option>
										<option value="val2">Rakennuksen pääasiallinen käyttötarkoitusmuutos</option>
										<option value="val3">Muut muutostyös</option>
										<option value="val4">Perusparannusluonteinen muutostyö</option>
									</select>
                                    <label class="form-label" for="main_use">Rakennuksen pääasiallinen käyttötarkoitus: </label>
                                    <input class="form-input" type="text" data-bind="value: main_use" />
                                    <label class="form-label" for="building_volume">Rakennuksen tilavuus: </label>
                                    <input class="form-input" type="text" data-bind="value: building_volume" />
                                    <label class="form-label" for="building_gross_floor_area">Rakennuksen kerrosala: </label>
                                    <input class="form-input" type="text" data-bind="value: building_gross_floor_area" />
                                    <label class="form-label" for="building_total_area">Rakennuksen kokonaisala: </label>
                                    <input class="form-input" type="text" data-bind="value: building_total_area" />
                                    <label class="form-label" for="floor_count">Kerrosluku: </label>
                                    <input class="form-input" type="text" data-bind="value: floor_count" />
                                    <label class="form-label" for="cellar_floor_area">Kellarin pintala: </label>
                                    <input class="form-input" type="text" data-bind="value: cellar_floor_area" />
                                    <label class="form-label" for="supporting_structure_material">Kantavien rakenteiden pääasiallinen rakennusaine: </label>
                                    <select class="form-input combobox" data-bind="value: supporting_structure_material">
										<option value="val1">Betoni</option>
										<option value="val2">Tiili</option>
										<option value="val3">Teräs</option>
										<option value="val4">Puu</option>
										<option value="val5">Muu</option>
									</select>
                                    <input class="form-input other" type="text" data-bind="value: supporting_structure_material_other" />
                                    <label class="form-label" for="build_style">Rakennuksen pääasiallinen rakennustapa: </label>
                                    <select class="form-input combobox" data-bind="value: build_style">
										<option value="val1">Elementtirakenteinen</option>
										<option value="val2">Paikalla tehty</option>
									</select> <label class="form-label" for="facade_material">Pääasiallinen julkisivumateriaali: </label>
                                    <select class="form-input combobox" data-bind="value: facade_material">
										<option value="val1">Betoni</option>
										<option value="val2">Tiili</option>
										<option value="val3">Teräs</option>
										<option value="val4">Puu</option>
										<option value="val5">Lasi</option>
										<option value="val6">Muu</option>
									</select>
                                    <input class="form-input other" type="text" data-bind="value: facade_material_other" />
                                    <label class="form-label" for="network_interfaces">Liittymät verkostoihin: </label>
									<div class="form-group" data-bind="with: network_interfaces">
										<input class="form-input checkbox" type="checkbox" data-bind="checked: sewer">
                                        <label class="form-label"> Viemäri</label>
                                        <input class="form-input checkbox" type="checkbox" data-bind="checked: water">
                                        <label class="form-label"> Vesijohto</label>
                                        <input class="form-input checkbox" type="checkbox" data-bind="checked: electricity">
                                        <label class="form-label"> Sähkö</label>
                                        <input class="form-input checkbox" type="checkbox" data-bind="checked: gas"> 
                                        <label class="form-label"> Maakaasu</label> 
                                        <input class="form-input checkbox" type="checkbox" data-bind="checked: cabel"> 
                                        <label class="form-label"> Kaapeli</label>
									</div>
									<label class="form-label" for="heating">Pääasiallinen lämmitystapa: </label>
                                    <select class="form-input combobox" data-bind="value: heating">
										<option value="val1">Vesikeskuslämmitys</option>
										<option value="val2">Ilmakeskuslämmitys</option>
										<option value="val3">Suora sähkölämmitys</option>
										<option value="val4">uunilämmitys</option>
										<option value="val5">Ei kiinteää lämmityslaitetta</option>
									</select>
                                    <label class="form-label" for="heating_source">Polttoaine/lämmönlähde: </label>
                                    <select class="form-input combobox" data-bind="value: heating_source">
										<option value="val1">Kauko- tai aluelämpö</option>
										<option value="val2">Kevyt polttoöljy</option>
										<option value="val3">Raksas polttoöljy</option>
										<option value="val4">Sähkö</option>
										<option value="val5">Kaasu</option>
										<option value="val6">Kivihiili, koksi tms.</option>
										<option value="val7">Puu</option>
										<option value="val8">Turve</option>
										<option value="val9">Maalämpö tms</option>
										<option value="val10">Muu</option>
									</select>
                                    <input class="form-input_other" type="text" data-bind="value: heating_source_other" />
                                    <label class="form-label" for="building_equipments">Rakennuksen varusteet: </label>
									<div class="form-group" data-bind="with: building_equipments">
                                        <div>
                                            <input class="form-input checkbox" type="checkbox" data-bind="checked: electricity">
                                            <label class="form-label">Sähkö</label>
                                        </div>
										<div>
                                            <input class="form-input checkbox" type="checkbox" data-bind="checked: gas" value="gas">
                                            <label class="form-label"> Kaasu</label>
                                        </div>
										<div>
                                            <input class="form-input checkbox" type="checkbox" data-bind="checked: sewer">
                                            <label class="form-label"> Viemäri</label>
                                        </div>
										<div>
                                            <input class="form-input checkbox" type="checkbox" data-bind="checked: water">
                                            <label class="form-label">Vesijohto</label>
                                        </div>
										<div>
                                            <input class="form-input checkbox" type="checkbox" data-bind="checked: warm_water">
                                            <label class="form-label"> Lämmin vesi</label>
                                        </div>
										<div>
                                            <input class="form-input checkbox" type="checkbox" data-bind="checked: solar_panel">
                                            <label class="form-label"> Aurinkopaneeli</label>
                                        </div>
										<div>
                                            <input class="form-input checkbox" type="checkbox" data-bind="checked: elevator">
                                            <label class="form-label"> Hissi</label> <br>
                                        </div>
										<div>
                                            <input class="form-input checkbox" type="checkbox" data-bind="checked: air_conditioning">
										    <label class="form-label"> Koneellinen ilmastointi</label>
                                        </div>
										<div>
                                            <label class="form-label"> Talokohtaisia saunoja</label>
                                            <input class="form-input" type="text" data-bind="checked: saunas">
                                        </div>
										<div>
                                            <label class="form-label"> Uima-altaita</label>
                                            <input class="form-input" type="text" data-bind="checked: swimming_pools">
                                        </div>
										<div>
                                            <label class="form-label"> Väestönsuoja</label>
                                            <input class="form-input" type="text" data-bind="checked: shelter">
                                        </div>
									</div>
									<table class="form-table" data-bind="with: aaa">
										<tr>
											<th>Tila</th>
											<th>Huoneistoala neliömetreinä</th>
										</tr>
										<tr>
											<td><p>Asuntotilaa (ei vapaa-ajan asunnosta)</p></td>
											<td><input type="text" data-bind="value: a1"></td>
										</tr>
										<tr>
											<td><p>Myymälä- majoitus- ja ravitsemistilaa</p></td>
											<td><input type="text" data-bind="value: a2"></td>
										</tr>
										<tr>
											<td><p>Hoitotilaa</p></td>
											<td><input type="text" data-bind="value: a3"></td>
										</tr>
										<tr>
											<td><p>Toimisto- ja hallintotilaa</p></td>
											<td><input type="text" data-bind="value: a4"></td>
										</tr>
										<tr>
											<td><p>Kokoontumistilaa</p></td>
											<td><input type="text" data-bind="value: a5"></td>
										</tr>
										<tr>
											<td><p>Opetustilaa</p></td>
											<td><input type="text" data-bind="value: a6"></td>
										</tr>
										<tr>
											<td><p>Tuotantotilaa (teollisuus)</p></td>
											<td><input type="text" data-bind="value: a7"></td>
										</tr>
										<tr>
											<td><p>Varastotilaa</p></td>
											<td><input type="text" data-bind="value: a8"></td>
										</tr>
										<tr>
											<td><p>Muuta huoneistoalaan kuuluvaa tilaa</p></td>
											<td><input type="text" data-bind="value: a9"></td>
										</tr>
										<tr class="table-summary">
											<td><p>Huoneistoala yhteensä</p></td>
											<td><input type="text" data-bind="value: a10"></td>
										</tr>
									</table>
								</form>
								<button data-bind="click: save" type="submit" class="btn btn-success">Tallenna</button>
							</div>
							<div class="content-actions" data-bind="visible: $root.authorization && $root.authorization.data()['approve-content'] && $root.authorization.data()['approve-content'].ok">
								<button class="todo btn btn-small content-accept">Hyväksy</button>
								<button class="todo btn btn-small content-reject">Hylkää</button>
							</div>
						</div>
					</div>
					<div class="application_section">
						<h2 class="application_section_header" data-bind="click: $root.accordian.accordianClick, clickBubble: false">Huoneiston tiedot</h2>
						<div class="application_section_content content_expanded">
							<div class="content-actions" data-bind="visible: $root.authorization && $root.authorization.data()['approve-content'] && $root.authorization.data()['approve-content'].ok">
								<button class="todo btn btn-small content-accept">Hyväksy</button>
								<button class="todo btn btn-small content-reject">Hylkää</button>
							</div>
							<div data-bind="with: $root.rh1">
								<form data-bind="with: huoneistonTiedot">
									<div class="input-group">
										<input type="radio" data-bind="checked: apartments" value="no_new_apartments"> Ei asuntoja rakennuksessa tai asuntoihin ei tehdä muutoksia  <input type="radio" data-bind="checked: apartments" value="one_new_apartment"> Yksi asunto uudessa rakennuksessa tai yksi uusi huoneisto  <input type="radio" data-bind="checked: apartments" value="new_apartments"> Useampia asuntoja uudessa rakennuksessa tai asuntoon tehdään muutoksia 
									</div>
									<label class="form-label" for="apartment_id">Huoneiston tunniste (jos on käytössä): </label> <input class="form-input" type="text" data-bind="value: apartment_id" /> <label class="form-label" for="room_count">Huoneluku ilman keittiötä (kpl): </label> <input class="form-input" type="text" data-bind="value: room_count" /> <label class="form-label" for="kitchen_type">Keittiötyyppi: </label> <select class="form-input combobox" data-bind="value: kitchen_type">
										<option value="val1">Keittiö</option>
										<option value="val2">Keittokomero</option>
										<option value="val3">Keittotila</option>
										<option value="val3">Tupakeittiö</option>
									</select>  <label class="form-label" for="apartment_floor_area">Huoneistoala: </label> <input class="form-input" type="text" data-bind="value: apartment_floor_area" /> <label class="form-label" for="apartment_equipments">Huoneiston varusteet: </label>
									<div class="input-group" data-bind="with: apartment_equipments">
										<input class="form-input" type="checkbox" data-bind="checked: toilet"> <label class="group-label"> WC</label> <input class="form-input" type="checkbox" data-bind="checked: shower"> <label class="group-label"> Amme / Suihku</label> <input class="form-input" type="checkbox" data-bind="checked: sauna"> <label class="group-label"> Sauna</label> <input class="form-input" type="checkbox" data-bind="checked: balcony"> <label class="group-label"> Parveke / terassi</label> <input class="form-input" type="checkbox" data-bind="checked: warm_water"> <label class="group-label"> Lämmin vesi</label> 
									</div>
									<label class="form-label" for="new_apartments">Uusia asuntoja yhteensä </label> <input class="form-input" type="text" data-bind="value: new_apartments" /> <label class="form-label" for="apartments_total_floor_area">Asuntojen pinta-ala yhteensä </label> <input class="form-input" type="text" name="apartments_total_floor_area" />
								</form>
								<button data-bind="click: save" type="submit" class="btn btn-success">Tallenna</button>
							</div>
						</div>
					</div>
				</div>
				<div class="tab_content" id="hearings_tab">TPD</div>
				<div class="tab_content" id="pleadings_tab">TPD</div>
				<div class="tab_content" id="attachments_tab">
					<div class="tab-wrapper">
            <table data-bind="if: attachments && attachments().length"
                   class="table table-striped">
              <thead>
                <tr>
                  <th>Tila</th>
                  <th>Tyyppi</th>
                  <th>Tiedosto</th>
                  <th>Versio</th>
                  <th>Muokattu</th>
                  <th></th>
                </tr>
              </thead>
              <tbody data-bind="foreach: attachments">
							<tr style="cursor: pointer;">
                  <td data-bind="text: loc('attachmentState_' + state)"
                      class="attachment-state"></td>
                  <td data-bind="attr: {onclick: open}">
                    <span data-bind="if: type != null && type.length > 0"><span data-bind="text: type"></span></span>
                    <span data-bind="if: type == null || type.length == 0"> <i>Nimetön</i>
								</span></td>
								<td><span data-bind="if: $data.latestVersion.filename">
								    <a href="" data-bind="text: loc('view') + ' ' + latestVersion.filename, attr: {href: '/rest/view/' + latestVersion.fileId}" target="_blank"></a> -
								    <a href="" data-bind="text: loc('download') + ' ' + latestVersion.filename, attr: {href: '/rest/download/' + latestVersion.fileId}"></a>
								    <i data-bind="ltext: latestVersion.contentType"></i> <i data-bind="size: latestVersion.size"></i>
								</span></td>
                  <td data-bind="if: $data.latestVersion"><span data-bind="version: latestVersion.version"></span></td>
                  <td data-bind="if: $data.modified">
                    <span data-bind="dateString: modified"></span>
                    <span data-bind="if: $data.latestVersion"><span data-bind="fullName: latestVersion.user"></span></span>
                  </td>
                  <td></td>
							</tr>
              </tbody>
						</table>
            <div data-bind="ifnot: attachments && attachments().length">
							<i>Ei liitteitä</i>
						</div>
						<button id="test-open-add-attachment" class="btn btn-success" data-bind="click: attachment.newAttachment">Lisää liite</button>
					</div>
				</div>
				<div class="tab_content" id="conversation_tab">
					<div class="tab-wrapper">
                        <div class="span12">Keskustele hakemuksesta:</div>
						<table class="table table-striped">
							<tbody data-bind="foreach: comments">
								<tr class="comment">
                  <td class="commentParty">
									  <span class="date" data-bind="dateTimeString: created"></span><br/>
									  <span class="author" data-bind="text: user.firstName()+' '+user.lastName()"></span><br/>
                    <!-- span class="author" data-bind="fullName: user"></span><br/  TODO: Does not woek -->
									  <b>(<span class="role" data-bind="ltext: user.role"></span>)</b>
									</td>
									<td data-bind="text: text"></td>
								</tr>
							</tbody>
						</table>
						<form class="well" data-bind="with: $root.comment">
							<div class="row">
								<div class="span12">Keskustele hakemuksesta:</div>
							</div>
							<div class="row">&nbsp;</div>
							<textarea class="input-xlarge span5" id="commentText" data-bind="value: text, valueUpdate: 'afterkeydown'" rows="3" placeholder="Kirjoita viesti"></textarea>
							<div class="btn-toolbar">
								<button id="application.addComment" data-bind="disable: disabled, click: submit" type="submit" class="add-comment btn btn-primary">Lähetä viesti</button>
							</div>
						</form>
					</div>
				</div>
				<div class="tab_content" id="decision_tab">
					<div class="tab-wrapper">
						<div class="row" data-bind="with: verdict">
							<span id="test-application-verdict" data-bind="text: text"></span>
						</div>
					</div>
				</div>
			</div>
	</section>
</body>
</html>