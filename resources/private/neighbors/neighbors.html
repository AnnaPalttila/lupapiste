<!DOCTYPE html>
<html>
<body>
  <section class="page container" id="neighbors">

    <div id="neighbors-content">

      <div class="map map-large" id="neighbors-map"></div>
      
      <table class="application-neighbors">
        <thead>
          <tr>
            <th data-bind="ltext: 'neighbors.propertyId'"></th>
            <th data-bind="ltext: 'neighbors.owner'"></th>
            <th data-bind="ltext: 'neighbors.status'"></th>
            <th data-bind="ltext: 'neighbors.actions'"></th>
          </tr>
        </thead>
        <tbody data-bind="foreach: neighbors">
          <tr>
            <td data-bind="text: propertyId"></td>
            <td data-bind="with: owner">
              <span data-bind="text: name" class="owner-name"></span>
              <span data-bind="text: address.street" class="owner-street"></span>
              <span data-bind="text: address.zip" class="owner-zip"></span>
              <span data-bind="text: address.city" class="owner-city"></span>
            </td>
            <td data-bind="with: _.last(status)">
              <span data-bind="text: state" class="status-state"></span>
              <span data-bind="dateTimeString: created" class="status-time"></span>
            </td>
            <td>
              <a data-bind="click: $root.edit, clickBubble: false, ltext: 'neighbors.actions.edit'" href="#"></a>
              <a data-bind="click: $root.remove, clickBubble: false, ltext: 'neighbors.actions.remove'" href="#"></a>
            </td>
          </tr>
        </tbody>
      </table>
      
      <button data-bind="click: $root.add, ltext: 'neighbors.manage'" class="btn btn-primary modal"></button>
      
    </div>

    <div id="dialog-edit-neighbor" class="window autosized">
      <div class="dialog-header">
        <p data-bind="ltext: 'neighbors.edit.title'"></p>
        <p class="dialog-close close">X</p>
      </div>
      <div class="dialog-content">
        
        <form>
          <label data-bind="ltext: 'neighbors.edit.propertyId'" class="form-label" for="neighbors-edit-propertyId"></label>
          <input data-bind="value: propertyId, css: {'error': !propertyIdOk()}, valueUpdate: 'afterkeydown'" class="form-input text long" type="text" id="neighbors-edit-propertyId" />

          <label data-bind="ltext: 'neighbors.edit.name'" class="form-label" for="neighbors-edit-name"></label>
          <input data-bind="value: name" class="form-input text long" type="text" id="neighbors-edit-name" />

          <label data-bind="ltext: 'neighbors.edit.street'" class="form-label" for="neighbors-edit-street"></label>
          <input data-bind="value: street" class="form-input text long" type="text" id="neighbors-edit-street" />

          <label data-bind="ltext: 'neighbors.edit.city'" class="form-label" for="neighbors-edit-city"></label>
          <input data-bind="value: city" class="form-input text long" type="text" id="neighbors-edit-city" />

          <label data-bind="ltext: 'neighbors.edit.zip'" class="form-label" for="neighbors-edit-zip"></label>
          <input data-bind="value: zip" class="form-input text long" type="text" id="neighbors-edit-sip" />
          
          <label data-bind="ltext: 'neighbors.edit.email'" class="form-label" for="neighbors-edit-email"></label>
          <input data-bind="value: email, css: {'error': !emailOk()}, valueUpdate: 'afterkeydown'" class="form-input text long" type="text" id="neighbors-edit-email" />
        </form>
        
        <button data-bind="click: save, enable: ok, ltext: 'neighbors.edit.ok'" class="btn btn-primary btn-dialog"></button>
        <button data-bind="ltext: 'neighbors.edit.cancel'" class="btn btn-dialog close"></button>
        
      </div>
    </div>
    
  </section>
  
</body>
</html>
