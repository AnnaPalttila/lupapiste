<!DOCTYPE html>
<html>
  <body>
    <section class="page" id="organizations">
      <div class="container">

        <h2>Organizations</h2>

        <table data-test-id="organizations-table">
          <thead>
            <tr>
              <th data-bind="ltext: 'organization.id'"></th>
              <th data-bind="ltext: 'organization.name'"></th>
              <th data-bind="ltext: 'organization.inforequest.enabled'"></th>
              <th data-bind="ltext: 'organization.application.enabled'"></th>
              <th data-bind="ltext: 'organization.openinforequest.enabled'"></th>
              <th data-bind="ltext: 'organization.openinforequest.email'"></th>
              <th data-bind="ltext: 'edit'"></th>
            </tr>
          </thead>
          <tbody data-bind="foreach: organizationsModel.organizations">
            <tr>
              <td data-bind="text: $data.id"></td>
              <td data-bind="text: $data.name[loc.getCurrentLanguage()]"></td>
              <td data-bind="text: $data['inforequest-enabled'], attr: {'data-test-id': 'inforequest-enabled-' + $data.id}"></td>
              <td data-bind="text: $data['new-application-enabled'], attr: {'data-test-id': 'application-enabled-' + $data.id}"></td>
              <td data-bind="text: $data['open-inforequest'], attr: {'data-test-id': 'open-inforequest-' + $data.id}"></td>
              <td data-bind="text: $data['open-inforequest-email'], attr: {'data-test-id': 'open-inforequest-email-' + $data.id}"></td>
              <td>[<a href="#" data-bind="click: $parent.editOrganizationModel.open, ltext: 'edit', attr: {'data-test-id': 'edit-organization-' + $data.id}" class="modal"></a>]</td>
            </tr>
          </tbody>
        </table>

      </div>

      <div id="dialog-edit-organization" class="window autosized">
        <div data-bind="with: editOrganizationModel">
          <div class="dialog-header">
            <p data-bind="ltext: 'edit'"></p>
            <p class="dialog-close close">X</p>
          </div>

          <div class="dialog-content">

            <div>
              <div>
                <input type="checkbox" data-bind="checked: inforequestEnabled" data-test-id="inforequest-enabled" class="form-input" id="inforequest-enabled"></input>
                <label for="inforequest-enabled" class="form-label" data-bind ="ltext: 'organization.inforequest.enabled'"></label>
              </div>

              <div>
                <input type="checkbox" data-bind="checked: applicationEnabled" data-test-id="application-enabled" class="form-input" id="application-enabled"></input>
                <label class="form-label" for="application-enabled" data-bind ="ltext: 'organization.application.enabled'"></label>
              </div>

              <div>
                <input type="checkbox" data-bind="checked: openInforequestEnabled" class="form-input" id="open-inforequest"></input>
                <label class="form-label" for="open-inforequest" data-bind ="ltext: 'organization.openinforequest.enabled'"></label>
              </div>

              <div>
                <label class="form-label" for="open-inforequest-email" data-bind ="ltext: 'organization.openinforequest.email'"></label>
                <input type="text" data-bind="checked: openInforequestEmail" class="form-input" id="open-inforequest-email"></input>
              </div>

              <button data-bind="click: updateOrganization, enable: ok, disable: processing" class="btn btn-primary btn-dialog" data-test-id="save-organization">
                <span data-bind="ltext: 'save'"></span>
                <em data-bind="visible: pending" class="button-loader"></em>
              </button>

              <a data-bind="ltext: 'cancel'" class="btn-dialog close" href="#"></a>
            </div>

          </div>
        </div>
      </div>

    </section>
  </body>
</html>
