<!DOCTYPE html>
<html lang="en">
<body>
  <section class="page container" id="company">

    <div id="company-content">

      <div data-bind="visible: pending">
        <em class="button-loader"></em>
        <span data-bind="ltext: 'company.loading'"></span>
      </div>

      <div class="tabs-container" data-bind="with: tabs">
        <ul class="tabs" data-bind="foreach: tabs">
          <li data-bind="css: {active: active}">
            <a data-bind="click: click, attr: {'data-tab-id': name}" href="#">
              <span data-bind="ltext: 'company.tab.' + name"></span>
            </a>
          </li>
        </ul>
      </div>

      <div class="tab-content-container content">

        <!-- =================== -->
        <!-- info:              -->
        <!-- =================== -->

        <div data-bind="visible: tabs.visible('info')">
          <h1>INFO</h1>
        </div>

        <!-- =================== -->
        <!-- users:              -->
        <!-- =================== -->

        <div data-bind="visible: tabs.visible('users')">
          <div data-bind="visible: !pending()">
            <h1>
              <span data-bind="text: name"></span>
              (<span data-bind="text: y"></span>)
            </h1>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th data-bind="ltext: 'company.user.firstName'"></th>
                  <th data-bind="ltext: 'company.user.lastName'"></th>
                  <th data-bind="ltext: 'company.user.email'"></th>
                  <th data-bind="ltext: 'company.user.enabled'"></th>
                  <th data-bind="ltext: 'company.user.role'"></th>
                  <th data-bind="visible: isAdmin"></th>
                </tr>
              </thead>
              <tbody data-bind="foreach: users">
                <tr>
                  <td data-bind="text: firstName"></td>
                  <td data-bind="text: lastName"></td>
                  <td data-bind="text: email"></td>
                  <td data-bind="ltext: 'company.user.enabled.' + enabled()"></td>
                  <td data-bind="ltext: 'company.user.role.' + role()"></td>
                  <td data-bind="visible: $parent.isAdmin">
                    <div data-bind="visible: opsEnabled">
                      <a data-bind="click: toggleEnable, ltext: 'company.user.op.enabled.' + enabled()" href="#"></a>
                      <a data-bind="click: toggleAdmin,  ltext: 'company.user.op.admin.' + admin()" href="#"></a>
                      <a data-bind="click: deleteUser,   ltext: 'company.user.op.delete'" href="#"></a>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div data-bind="visible: isAdmin">
            <button data-bind="click: openNewUser, ltext: 'register.company.add-user.open'" class="btn btn-primary"></button>
          </div>
        </div>

      </div>
    </div>

    <div id="dialog-company-user-op" class="window autosized">
      <div class="dialog-header">
        <p data-bind="text: title"></p>
        <p class="dialog-close close">X</p>
      </div>
      <div class="dialog-content">

        <div>
          <span data-bind="html: message"></span>
        </div>

        <div data-bind="visible: pending">
          <em class="button-loader" style="position: relative;"></em>
          <span data-bind="ltext: 'company.user.op.pending'"></span>
        </div>

        <button data-bind="click: ok,
                           enable: !pending(),
                           ltext: 'yes'"
                class="btn btn-primary btn-dialog"
                data-test-id="dialog-company-user-op.ok">
        </button>
        <button data-bind="enable: !pending(),
                           ltext: 'no'"
                class="btn btn-dialog close">
        </button>

      </div>
    </div>

    <div id="dialog-company-new-user" class="window autosized">
      <div class="dialog-header">
        <p data-bind="ltext: 'register.company.add-user.header'"></p>
        <p class="dialog-close close">X</p>
      </div>
      <div class="dialog-content">
        <form>
          <h1 data-bind="ltext: 'register.company.add-user.message'"></h1>

          <label data-bind="ltext: 'company.user.firstName'" class="form-label tip"></label>
          <input data-bind="value: model().firstName, valueUpdate: 'afterkeydown'" class="form-input" type="text" placeholder="Etunimi"/>

          <label data-bind="ltext: 'company.user.lastName'" class="form-label tip"></label>
          <input data-bind="value: model().lastName, valueUpdate: 'afterkeydown'" class="form-input" type="text" placeholder="Sukunimi"/>

          <label data-bind="ltext: 'company.user.email'" class="form-label tip"></label>
          <input data-bind="value: model().email, valueUpdate: 'afterkeydown'" class="form-input" type="text" placeholder="etunimi.sukunimi@osoite.fi"/>

          <input data-bind="checked: model().admin" class="form-input" type="checkbox" id="register.company.add-user.admin"></input>
          <label data-bind="ltext: 'register.company.add-user.admin'" class="form-label" for="register.company.add-user.admin"></label>

          <div data-bind="visible: pending">
            <h3>
              <em data-bind="visible: pending" class="button-loader" style="position: relative;"></em>
              <span data-bind="ltext: 'register.company.add-user.pending'"></span>
            </h3>
          </div>

          <div data-bind="visible: done">
            <h3 data-bind="ltext: 'register.company.add-user.done.header'"></h3>
            <p data-bind="ltext: 'register.company.add-user.done.message'"></p>
            <p data-bind="ltext: 'register.company.add-user.done.canClose'"></p>
          </div>

          <div>
            <button data-bind="enable: canSubmit, click: submit, ltext: 'register.company.add-user.submit'" type="submit" class="btn btn-dialog btn-primary"></button>
            <button data-bind="enable: canClose, ltext: 'close'" class="btn btn-dialog close"></button>
          </div>
        </form>
      </div>
    </div>

  </section>
</body>
</html>
