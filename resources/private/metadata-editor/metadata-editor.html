<!DOCTYPE html>
<html>
<body>
<section class="page container" id="stamping">
  <script type="text/html" id="metadata-editor-template">
    <div class="metadata-editor-container">

      <h3>Arkistointitiedot</h3>

      <div class="editor">
        <div style="float: right" data-bind="if: displayOnly">
          <button data-bind="click: edit">Muokkaa</button>
        </div>
        <div class="editor-form" data-bind="foreach: schema">
          <div>
            <div data-bind="if: $data.values">
              <label data-bind="ltext: type"></label><br>
              <div data-bind="visible: $parent.displayOnly,
                              ltext: $parent.editedMetadata()[type]"></div>
              <select data-bind="visible: $parent.editable,
                                   options: values,
                                   optionsText: loc,
                                   value: $parent.editedMetadata()[type]" ></select>
            </div>
            <div data-bind="if: $data.inputType">
              <label data-bind="ltext: type"></label><br>
              <div data-bind="visible: $parent.displayOnly,
                              text: $parent.editedMetadata()[type]"></div>
              <input data-bind="visible: $parent.editable,
                                attr: {type: inputType},
                                value: $parent.editedMetadata()[type]">
            </div>
            <div data-bind="if: $data.subfields">
              <div class="subtable">
                <h4 data-bind="ltext: type"></h4>
                <div data-bind="foreach: subfields">
                  <label data-bind="ltext: type"></label><br>
                  <div data-bind="if: $data.values">
                    <div data-bind="visible: $parents[1].displayOnly,
                                    ltext: $parents[1].editedMetadata()[$parent.type]()[type]"></div>
                    <select data-bind="visible: $parents[1].editable,
                                       options: values,
                                       optionsText: loc,
                                       value: $parents[1].editedMetadata()[$parent.type]()[type]"></select>
                  </div>
                  <div data-bind="if: $data.inputType">
                    <div data-bind="visible: $parents[1].displayOnly,
                                    text: $parents[1].editedMetadata()[$parent.type]()[type]"></div>
                    <div data-bind="visible: $parents[1].editable">
                      <input type="text" data-bind="value: $parents[1].editedMetadata()[$parent.type]()[type]">
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div data-bind="if: $data.dependencies && $data.dependencies[$parent.editedMetadata()[type]]">
              <div data-bind="foreach: dependencies[$parent.editedMetadata()[type]]">
                <label data-bind="ltext: type"></label><br>
                <div data-bind="if: $data.values">
                  <div data-bind="visible: $parents[1].displayOnly,
                                  ltext: $parents[1].editedMetadata()[type]"></div>
                  <select data-bind="visible: $parents[1].editable,
                                     options: values,
                                     optionsText: loc,
                                     value: $parents[1].editedMetadata()[type]"></select>
                </div>
                <div data-bind="if: $data.inputType">
                  <div data-bind="visible: $parents[1].displayOnly,
                                  text: $parents[1].editedMetadata()[type]"></div>
                  <div data-bind="visible: $parents[1].editable">
                    <input type="text" data-bind="value: $parents[1].editedMetadata()[type]">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div data-bind="if: editable">
          <div class="editor-buttons">
            <button class="save" data-bind="click: save">Tallenna</button>
            <button class="delete" data-bind="click: cancelEdit" a>Peruuta</button>
          </div>
        </div>
      </div>


    </div>
 </script>
</section>
</body>
</html>