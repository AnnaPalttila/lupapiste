<!DOCTYPE html>
<html>
<body>
  <section class="page container">
    <script type="text/x-jquery-tmpl" id="bulletin-comment-box-template">
      <form data-bind="submit: sendComment"
            data-test-id="bulletin-comment-box-form"
            class="form-grid form-grid--no-border">

        <!-- personal details -->
        <div data-bind="with: userInfo">
          <div class="row">
            <div class="col-1">
              <div data-bind="component: {name: 'text-field',
                                          params: {value: firstName,
                                                   id: 'firstName',
                                                   lLabel: 'userinfo.firstName',
                                                   required: true,
                                                   disable: true}}"></div>
            </div>
            <div class="col-1">
              <div data-bind="component: {name: 'text-field',
                                          params: {value: lastName,
                                                   id: 'lastName',
                                                   lLabel: 'userinfo.lastName',
                                                   required: true,
                                                   disable: true}}"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-1">
              <div data-bind="component: {name: 'text-field',
                                          params: {value: street,
                                                   id: 'street',
                                                   lLabel: 'userinfo.street',
                                                   required: true,
                                                   disable: true}}"></div>
            </div>
            <div class="col-1">
              <div data-bind="component: {name: 'text-field',
                                          params: {value: zip,
                                                   id: 'zip',
                                                   lLabel: 'userinfo.zip',
                                                   required: true,
                                                   disable: true}}"></div>
            </div>
            <div class="col-1">
              <div data-bind="component: {name: 'text-field',
                                          params: {value: city,
                                                   id: 'city',
                                                   lLabel: 'userinfo.city',
                                                   required: true,
                                                   disable: true}}"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-1">
              <div data-bind="component: {name: 'text-field',
                                          params: {value: $component.email,
                                                   id: 'email',
                                                   lLabel: 'userinfo.email',
                                                   required: true}}"></div>
            </div>
            <div class="col-1">
              <br/>
              <div data-bind="component: {name: 'checkbox-field',
                                          params: {value: $component.emailPreferred,
                                                   id: 'emailPreferred',
                                                   lLabel: 'bulletin.comment.emailPreferred'}}"></div>
            </div>
          </div>
        </div>

        <div class="row">
           <div class="col-4"
               data-bind="component: {name: 'textarea-field',
                                      params: {value: comment,
                                               id: 'bulletin-comment-field',
                                               lLabel: 'bulletin.comment',
                                               lPlaceholder: 'bulletin.comment.placeholder'}}"></div>
        </div>
        <div class="row">
          <label data-bind="ltext: 'bulletin.comment.selectedAttachments'"></label>
          <input class="hidden" type="file" data-bind="event: {change: fileChanged}"/>
          <input class="hidden" type="text" name="bulletin-id" data-bind="value: bulletinId"/>
          <input class="hidden" type="text" name="bulletin-version-id" data-bind="value: versionId"/>
          <!-- ko if: attachments().length > 0 -->
          <ul class="bulletin-comment__attachment-list" data-bind="foreach: attachments">
            <li>
              <span data-bind="text: $data.name"></span>
              <span data-bind="size: $data.size"></span>
              <span>
                <a href="#" data-bind="click: $component.removeAttachment">
                  <span data-bind="ltext: 'remove'"></span>
                </a>
              </span>
            </li>
          </ul>
          <!-- /ko -->
          <!-- ko if: attachments().length === 0 -->
          <p data-bind="ltext: 'bulletin.comment.noAttachments'"></p>
          <!-- /ko -->
        </div>
        <div class="row">
          <button class="bulletin" data-bind="click: addAttachment">
            <i class="lupicon-paperclip"></i>
            <span data-bind="ltext: 'bulletin.comment.addAttachment'"></span>
          </button>
        </div>
        <div class="row">
          <button type="submit" class="positive" data-bind="disable: isDisabled,
                                                            css: {waiting: pending}">
            <i class="lupicon-comment"></i>
            <i class="wait spin lupicon-refresh"></i>
            <span data-bind="ltext: 'bulletin.comment.send'"></span>
          </button>
        </div>
      </form>
    </script>
  </section>
</body>
</html>
