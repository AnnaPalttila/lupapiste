<!DOCTYPE html>
<html >
<body>
  <section class="page container" id="task" data-bind="with: task">
  <h1 data-bind="text: displayName">Task</h1>
  <div class="clear-fix">
    <button class="btn" data-bind="ltext:'task.delete', click: deleteTask"></button>
    <a class="btn attachment-back"
       style="float:right"
       data-bind="attr: {href: '#!/application/' + applicationId + '/tasks' }"
       data-test-id="back-to-application-from-task"><span class="icon drill-left-black left-align"></span><span data-bind =" ltext: 'attachment.return'"></span></a> <!-- TODO change key -->
  </div>

  <div id="taskDocgen" class="docgen-content" style="width:48%;float:left"></div>
  <div id="taskAttachments" style="width:48%;float:right">
    <div data-bind="with: $root.attachmentsModel" class="statement-conversation">
      <div class="statement-attachments">
        <h3 data-bind="ltext: 'inforequest.attachments'"></h3>
        <div data-bind="if: attachments().length">
          <table class="table" data-test-id="inforequest-attachments-table">
            <thead>
              <tr>
                <th data-bind="ltext: 'application.attachmentFile'">Tiedosto</th>
                <th data-bind="ltext: 'application.attachmentEditDate'">Muokattu</th>
                <th></th>
              </tr>
            </thead>
            <tbody data-bind="foreach: attachments">
              <tr data-bind="with: $data.latestVersion">
                <td>
                  <a href="#" data-bind="text: filename, attr: {href: '/api/raw/download-attachment?attachment-id=' + fileId}"></a><br/>
                  <i data-bind="ltext: contentType"></i>
                  <i data-bind="size: size"></i>
                </td>
                <td>
                  <span data-bind="dateString: $parent.modified"></span>
                  <span data-bind="fullName: user"></span>
                </td>
                <td>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div data-bind="ifnot: attachments().length">
          <i data-bind="ltext: 'application.verdict.no-attachments'" data-test-id="verdict-no-attachments"></i>
        </div>

        <button
          class="btn"
          data-bind="ltext: 'application.attachmentsAdd', visible: $root.authorization.ok('upload-attachment'), enabled: $root.authorization.ok('upload-attachment'), click: newAttachment"
          data-test-id="add-task-attachment">
        </button>
      </div>
    </div>
  </div>

  </section>
</body>
</html>
