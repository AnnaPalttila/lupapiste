<!DOCTYPE html>
<html>
<body>
  <section class="page container">

    <script type="text/x-jquery-tmpl" id="statements-table-template">

      <div data-bind="ifnot: $data.statements && $data.statements().length > 0">
          <p data-bind="ltext: $data.localisationKeys.missing" data-test-id="application-no-statements"></p>
      </div>

      <div data-bind="if: $data.statements && $data.statements().length > 0">
          <table class="table table-striped tablesorter" data-test-id="application-statements">
              <thead>
                  <tr>
                      <th></th>
                      <th data-bind="ltext: 'application.statement.desc'"></th>
                      <th data-bind="ltext: 'auth-admin.statement-person.name'"></th>
                      <th data-bind="ltext: 'application.statement.requested'"></th>
                      <th data-bind="ltext: 'application.statement.maaraaika'"></th>
                      <th data-bind="ltext: 'application.statement.given'"></th>
                      <th data-bind="ltext: 'application.statement.status'"></th>
                      <!-- ko if: $component.authorization.ok('delete-statement') -->
                        <th data-bind="ltext: 'remove'"></th>
                      <!-- /ko -->
                  </tr>
              </thead>
              <tbody data-bind="foreach: $data.statements()">
                  <tr class="statement-row">
                      <td>
                        <i class="lupicon-paperclip" data-bind="visible: $component.hasAttachment($data)"></i>
                      </td>
                      <td>
                          <span data-bind="if: $data.status() || $component.authorization.ok('should-see-unsubmitted-statements')">
                              <a href="#" data-bind="text: $data.person.text,
                                                     click: $component.openStatement,
                                                     attr: {'data-test-id' : 'open-statement-' + $index()}"></a>
                          </span>
                          <span data-bind="ifnot: $data.status() || $component.authorization.ok('should-see-unsubmitted-statements')">
                              <span data-bind="text: $data.person.text, attr: {'data-test-id' : 'open-statement-' + $index()}"></span>
                          </span>
                      </td>
                      <td data-bind="text: $data.person.name"></td>
                      <td data-bind="dateString: $data.requested"></td>
                      <td data-bind="dateString: $data.dueDate,
                                     css: {'statement-over-due': $component.isStatementOverDue($data)}"></td>
                      <td data-bind="dateString: $data.given"></td>
                      <td data-bind="text: $data.status() && loc(['statement', $data.status()]), attr: {'data-test-name' : $data.person.name}"></td>
                      <!-- ko if: $component.authorization.ok('delete-statement') -->
                        <td>
                          <span data-bind="click: $component.openDeleteDialog,
                                           clickBubble: false,
                                           visible: $component.authorization.ok('delete-statement'),
                                           enable: $component.authorization.ok('delete-statement'),
                                           attr: {'class': 'lupicon-remove primary',
                                                  'title': loc('statement.delete'),
                                                  'data-test-id': 'delete-statement-' + $index()}"></span>
                        </td>
                      <!-- /ko -->
                  </tr>
              </tbody>
          </table>
      </div>

    </script>

  </section>
</body>
</html>
