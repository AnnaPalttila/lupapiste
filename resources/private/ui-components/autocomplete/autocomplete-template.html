<!DOCTYPE html>
<html>
<body>
  <section class="page container">
    <script type="text/x-jquery-tmpl" id="autocomplete-template">
      <div class="autocomplete-component" data-bind="css: {'has-tags': tags}">
        <div class="autocomplete-selection-wrapper" data-bind="event: {click: selectInput}">
          <span class="autocomplete-selection">
            <!-- ko if: selected -->
            <span data-bind="text: optionsText ? selected()[optionsText] : selected()"></span>
            <!-- /ko -->
            <span class="caption" data-bind="visible: showCaption, text: optionsCaption"></span>
            <!-- ko if: tags -->
            <ul data-bind="visible: selectedTags().length > 0" class="tags">
              <!-- ko foreach: selectedTags -->
              <li class="tag">
                <span class="tag-remove icon remove"
                      data-bind="click: $component.removeTag, clickBubble: false, event: { mousedown: function() {} }, mousedownBubble: false"></span>
                <span class="tag-label" data-bind="text: $component.optionsText ? $data[$component.optionsText] : $data,
                                                   titleWhenOverflow: $component.optionsText ? $data[$component.optionsText] : $data"></span>
              </li>
              <!-- /ko -->
            </ul>
            <!-- /ko -->
          </span>
          <span data-bind="visible: showCaption" class="autocomplete-selection-arrow icon drill-down-black-smaller"></span>
        </div>
        <div class="autocomplete-dropdown" data-bind="visible: false, fader: dropdownVisible, duration: 100">
          <input class="autocomplete-input" type="text" data-test-id="autocomplete-input"
                 data-bind="textInput: query, hasFocus: inputSelected, event: {keydown: navigate, blur: blur}"></input>
          <!-- ko if: data().length > 0 -->
          <ul class="autocomplete-result" data-bind="event: {mousedown: retainFocus}, css: {'autocomplete-result-grouped': groupedResults}">
            <!-- ko foreach: data -->
              <!-- ko if: $data && $data.groupHeader -->
              <li class="autocomplete-group-header" data-bind="text: $component.optionsText ? $data[$component.optionsText] : $data,
                                                               titleWhenOverflow: $component.optionsText ? $data[$component.optionsText] : $data"></li>
              <!-- /ko -->
              <!-- ko ifnot: $data && $data.groupHeader -->
              <li class="autocomplete-result-item"
                  data-bind="event: {mouseover: $component.changeIndex.bind($data, $index()),
                                     mousedown: $component.selectItem.bind($data)},
                             mousedownBubble: false,
                             css: {active: $index() === $component.index()},
                             titleWhenOverflow: $data === null ? $component.optionsCaption : $component.optionsText ? $data[$component.optionsText] : $data">
                <span data-bind="text: $data === null ? $component.optionsCaption : $component.optionsText ? $data[$component.optionsText] : $data"></span>
              </li>
              <!-- /ko -->
              <!-- /ko -->
            <!-- /ko -->
          </ul>
          <!-- /ko -->
          <!-- ko if: data().length === 0 -->
          <ul class="autocomplete-result">
            <li class="autocomplete-result-empty" data-bind="ltext: 'autocomplete.no-results'"></li>
          </ul>
          <!-- /ko -->
        </div>

      </div>
    </script>
  </section>
</body>
</html>
