<script class="ko-template" type="text/x-jquery-tmpl" id="bulletin-versions-template">
  <div data-test-id="bulletin-versions-accordion"
       data-bind="component: {name: 'accordion', params: {ltitle: 'bulletin.versions.history',
                                                          accordionContentTemplate: 'bulletin-versions-accordion-content',
                                                          accordionContentTemplateData: $data}}"></div>

</script>

<script class="ko-template" type="text/x-jquery-tmpl" id="bulletin-versions-accordion-content">
  <table class="table" data-test-id="bulletin-versions-table">
    <thead>
      <tr>
        <th data-bind="ltext: 'bulletin.versions.published'"></th>
        <th data-bind="ltext: 'bulletin.versions.state'"></th>
        <th data-bind="ltext: 'bulletin.versions.comments'"></th>
        <th data-bind="ltext: 'bulletin.versions.actions'"></th>
      </tr>
    </thead>
    <tbody data-bind="foreach: versions">
      <!-- ko ifnot: edit -->
      <tr data-bind="template: 'proclaimed-row'"></tr>
      <!-- /ko -->
      <!-- ko if: edit -->
      <tr data-bind="template: 'editable-proclaimed-row'"></tr>
      <!-- /ko -->
    </tbody>
  </table>
</script>

<script class="ko-template" type="text/x-jquery-tmpl" id="proclaimed-row">
  <td data-bind="dateString: modified"></td>
  <td data-bind="ltext: 'bulletin.state.' + bulletinState"></td>
  <td data-bind="text: $parent.versionCommentsCount"></td>
  <td class="actions">
    <!-- ko if: $data.editable -->
    <a href="#" class="link-btn" data-bind="click: $parent.editPublishedApplication, ltext: 'edit'"></a>
    <!-- /ko -->
    <a href="#" class="link-btn" data-bind="click: $parent.showVersionComments.bind($data), ltext: 'bulletin.versions.comments.show'"></a>
    <a href="#" class="link-btn" data-bind="ltext: 'bulletin.versions.version.show'"></a>
  </td>
</script>

<script class="ko-template" type="text/x-jquery-tmpl" id="editable-proclaimed-row">
  <td colspan=4>
    <div data-bind="template: 'edit-proclaimed-template'"></div>
    <button data-bind="click:  save,
                       enable: isValid(),
                       css:    {waiting: pending}"
            data-test-id="save-bulletin"
            class="positive">
      <i class="lupicon-save"></i>
      <i class="wait spin lupicon-refresh"></i>
      <span data-bind="ltext: 'save'"></span>
    </button>
    <button class="secondary action" data-bind="click: $parent.editPublishedApplication">
      <i class="lupicon-remove"></i>
      <span data-bind="ltext: 'cancel'"></span>
    </button>
  </td>
</script>
