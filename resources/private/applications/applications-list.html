<!DOCTYPE html>
<html>
<body>
  <section class="page" id="applications" data-test-id="own-applications">
    <div id="invitations" data-bind="with: invitesModel">
      <div class="invitations" data-bind="if: invites().length">
        <h2 data-bind="ltext: 'application.invites'"></h2>
        <div data-bind="foreach: invites" >
          <div class="invitation">
            <div>
              <h3 data-bind="text: headerText"></h3>
              <span data-bind="ltext: 'inviter'"></span>
              <span data-bind="fullName: inviter"></span>
              <p data-bind="visible: text, text: text, attr: {'data-test-id': 'invitation-text-' + $index()}"></p>
            </div>
            <div>
              <span data-bind="dateString: created"></span>
            </div>
            <div class="invitation-actions">
              <a data-bind="ltext: 'applications.openApplication', attr: {href: '#!/application/' + application.id}" class="btn btn-primary btn-auto" data-test-id="open-application-button"></a>
              <button data-bind="ltext: 'applications.approveInvite', click: $parent.approveInvite, enable: lupapisteApp.models.globalAuthModel.ok('approve-invite')"
                      class="btn btn-primary btn-auto" data-test-id="accept-invite-button"></button>
              <a class="command" data-bind="ltext: 'applications.declineInvite', click: $parent.declineInvite" data-test-id="decline-invite-button"></a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- ko if: lupapisteApp.models.currentUser.loaded() && init -->
    <div data-bind="component: 'applications-search'"></div>
    <!-- /ko -->
  </section>
</body>
</html>
